{"record_type":"meta","schema_version":"1","generated_at":"2026-01-26 21:44:49","source":"sqlite"}
{"record_type":"feature","name":"default","description":"Default feature set for basic task management","enabled":true,"created_at":"2026-01-26 07:40:49","updated_at":"2026-01-26 07:40:49"}
{"record_type":"feature","name":"graph-server-asset-separation","description":"Separate graph server HTML/JS into static assets and clean server routing","enabled":true,"created_at":"2026-01-26 10:46:20","updated_at":"2026-01-26 10:46:20"}
{"record_type":"feature","name":"mcp-typed-returns","description":"Migrate MCP outputs from Dict[str, Any] to typed Pydantic models","enabled":true,"created_at":"2026-01-26 07:44:29","updated_at":"2026-01-26 07:44:29"}
{"record_type":"feature","name":"tests","description":"Work related to test suite structure and scope.","enabled":true,"created_at":"2026-01-26 10:52:05","updated_at":"2026-01-26 10:52:05"}
{"record_type":"task","name":"add-snapshot-path-helper","description":"Add default snapshot path helper","details":"Update src/tasktree_mcp/paths.py with get_snapshot_path() returning repo root JSONL path (e.g., <repo>/tasktree.snapshot.jsonl) and handling env override if desired. Keep path absolute and ensure parent exists.","feature_name":"default","tests_required":true,"priority":4,"status":"completed","created_at":"2026-01-26 10:03:24","updated_at":"2026-01-26 20:57:36","started_at":"2026-01-26 10:41:05","completed_at":"2026-01-26 20:57:36"}
{"record_type":"task","name":"add-snapshot-tests","description":"Add tests for snapshot export/import","details":"Create tests for JSONL export ordering and import round-trip using temp DB fixture; verify counts and key fields, handle empty DB, and ensure invalid snapshot raises.","feature_name":"default","tests_required":true,"priority":6,"status":"completed","created_at":"2026-01-26 10:03:35","updated_at":"2026-01-26 21:34:01","started_at":"2026-01-26 21:28:30","completed_at":"2026-01-26 21:34:01"}
{"record_type":"task","name":"add-taskfile-snapshot-commands","description":"Add Taskfile commands for snapshot","details":"Add Taskfile.yml tasks (snapshot-export, snapshot-import) using uv run to call snapshot module; ensure commands respect overwrite flag and use default snapshot path.","feature_name":"default","tests_required":true,"priority":4,"status":"completed","created_at":"2026-01-26 10:03:31","updated_at":"2026-01-26 10:57:47","started_at":"2026-01-26 10:51:30","completed_at":"2026-01-26 10:57:47"}
{"record_type":"task","name":"add-tests-required-flag","description":"Add tests_required boolean flag (default true) to tasks table via schema update and non-destructive inline migration script.","details":"Update sql/schemas to include tests_required column; run inline migration script (no migration file) to alter existing table without data loss.","feature_name":"default","tests_required":true,"priority":7,"status":"completed","created_at":"2026-01-26 10:19:11","updated_at":"2026-01-26 10:32:30","started_at":"2026-01-26 10:23:06","completed_at":"2026-01-26 10:32:30"}
{"record_type":"task","name":"define-response-models","description":"Create/extend Pydantic response models for task/dependency/tool outputs","details":null,"feature_name":"mcp-typed-returns","tests_required":true,"priority":8,"status":"completed","created_at":"2026-01-26 07:44:35","updated_at":"2026-01-26 08:05:29","started_at":"2026-01-26 08:01:17","completed_at":"2026-01-26 08:05:29"}
{"record_type":"task","name":"design-jsonl-snapshot-format","description":"Define JSONL snapshot schema and ordering","details":"Specify JSONL record types (meta/feature/task/dependency), field sets, deterministic ordering, and JSON serialization settings (sort_keys, separators, ensure_ascii). Include timestamp handling decision and versioning.","feature_name":"default","tests_required":true,"priority":6,"status":"completed","created_at":"2026-01-26 10:03:16","updated_at":"2026-01-26 10:17:48","started_at":"2026-01-26 10:14:29","completed_at":"2026-01-26 10:17:48"}
{"record_type":"task","name":"document-snapshot-workflow","description":"Document snapshot merge workflow","details":"Update README and/or src/tasktree_mcp/README.md to explain JSONL snapshot usage, merge workflow, and rehydrate steps; mention DB stays in .gitignore.","feature_name":"default","tests_required":true,"priority":3,"status":"completed","created_at":"2026-01-26 10:03:39","updated_at":"2026-01-26 12:42:01","started_at":"2026-01-26 12:38:03","completed_at":"2026-01-26 12:42:01"}
{"record_type":"task","name":"expose-tests-required-mcp","description":"Expose tests_required parameter in MCP server and document how to set it when tasks are non-testable.","details":"Update models/tools/docs so tests_required is accepted/returned; document guidance: set false when task does not involve testable code.","feature_name":"default","tests_required":true,"priority":6,"status":"completed","created_at":"2026-01-26 10:19:14","updated_at":"2026-01-26 10:51:10","started_at":"2026-01-26 10:40:51","completed_at":"2026-01-26 10:51:10"}
{"record_type":"task","name":"graph-server-create-assets-dir","description":"Create scripts/graph-server with index.html and graph.js placeholders","details":null,"feature_name":"graph-server-asset-separation","tests_required":true,"priority":6,"status":"completed","created_at":"2026-01-26 10:46:25","updated_at":"2026-01-26 10:54:22","started_at":"2026-01-26 10:47:51","completed_at":"2026-01-26 10:54:22"}
{"record_type":"task","name":"graph-server-extract-html-template","description":"Move HTML into index.html with placeholders for features and task list","details":null,"feature_name":"graph-server-asset-separation","tests_required":true,"priority":7,"status":"completed","created_at":"2026-01-26 10:46:26","updated_at":"2026-01-26 11:22:22","started_at":"2026-01-26 10:58:11","completed_at":"2026-01-26 11:22:22"}
{"record_type":"task","name":"graph-server-extract-js","description":"Move inline JavaScript into graph.js and load via /static/graph.js","details":null,"feature_name":"graph-server-asset-separation","tests_required":true,"priority":7,"status":"completed","created_at":"2026-01-26 10:46:27","updated_at":"2026-01-26 11:20:39","started_at":"2026-01-26 11:01:27","completed_at":"2026-01-26 11:20:39"}
{"record_type":"task","name":"graph-server-serve-static-files","description":"Serve static assets under /static with basic mime types","details":null,"feature_name":"graph-server-asset-separation","tests_required":true,"priority":8,"status":"completed","created_at":"2026-01-26 10:46:27","updated_at":"2026-01-26 11:01:06","started_at":"2026-01-26 10:54:48","completed_at":"2026-01-26 11:01:06"}
{"record_type":"task","name":"graph-server-update-handler","description":"Update handler to render template and remove inline HTML/JS","details":null,"feature_name":"graph-server-asset-separation","tests_required":true,"priority":8,"status":"completed","created_at":"2026-01-26 10:46:28","updated_at":"2026-01-26 12:37:45","started_at":"2026-01-26 12:31:13","completed_at":"2026-01-26 12:37:45"}
{"record_type":"task","name":"implement-snapshot-module","description":"Add snapshot export/import module","details":"Create src/tasktree_mcp/snapshot.py with export_snapshot(db_path, snapshot_path) and import_snapshot(db_path, snapshot_path, overwrite=True). Export writes stable JSONL with meta line and ordered records. Import recreates DB when overwrite, applies schemas/views, validates records, inserts in a transaction.","feature_name":"default","tests_required":true,"priority":7,"status":"completed","created_at":"2026-01-26 10:03:20","updated_at":"2026-01-26 10:27:30","started_at":"2026-01-26 10:20:29","completed_at":"2026-01-26 10:27:30"}
{"record_type":"task","name":"inventory-untyped-returns","description":"Inventory all MCP tools and repository methods returning Dict[str, Any], noting callers and tests","details":null,"feature_name":"mcp-typed-returns","tests_required":true,"priority":7,"status":"completed","created_at":"2026-01-26 07:44:32","updated_at":"2026-01-26 07:59:09","started_at":"2026-01-26 07:54:50","completed_at":"2026-01-26 07:59:09"}
{"record_type":"task","name":"prune-test-suite","description":"Audit existing tests and remove low-value or redundant cases to reduce suite size while preserving coverage signal.","details":"Review test suite for redundant/flaky cases; keep core coverage and remove low-value tests; document removals briefly in PR/notes.","feature_name":"tests","tests_required":true,"priority":6,"status":"completed","created_at":"2026-01-26 10:52:06","updated_at":"2026-01-26 11:23:38","started_at":"2026-01-26 11:21:01","completed_at":"2026-01-26 11:23:38"}
{"record_type":"task","name":"prune-test-suite-cleanup","description":"Remove or consolidate low-value tests based on review list.","details":"Delete tests marked low-value and consolidate overlapping cases while keeping key scenarios covered.","feature_name":"tests","tests_required":true,"priority":6,"status":"completed","created_at":"2026-01-26 10:52:10","updated_at":"2026-01-26 12:45:43","started_at":"2026-01-26 12:38:30","completed_at":"2026-01-26 12:45:43"}
{"record_type":"task","name":"prune-test-suite-review","description":"Review current test suite and tag candidates for removal or consolidation.","details":"Scan tests for redundancy, slow/flaky behavior, or low-signal coverage; list candidates and rationale.","feature_name":"tests","tests_required":true,"priority":5,"status":"completed","created_at":"2026-01-26 10:52:10","updated_at":"2026-01-26 12:38:12","started_at":"2026-01-26 12:32:16","completed_at":"2026-01-26 12:38:12"}
{"record_type":"task","name":"snapshot-docs","description":"Note JSON1 dependency and export behavior in docs or module docstring.","details":null,"feature_name":"default","tests_required":true,"priority":10,"status":"pending","created_at":"2026-01-26 21:09:41","updated_at":"2026-01-26 21:09:41","started_at":null,"completed_at":null}
{"record_type":"task","name":"snapshot-export-impl","description":"Update export_snapshot to stream JSONL directly from SQLite query, with JSON1 availability guard and fallback/error behavior.","details":null,"feature_name":"default","tests_required":true,"priority":10,"status":"completed","created_at":"2026-01-26 21:09:35","updated_at":"2026-01-26 21:29:29","started_at":"2026-01-26 21:22:25","completed_at":"2026-01-26 21:29:29"}
{"record_type":"task","name":"snapshot-export-tests","description":"Update/add tests to verify JSONL output ordering, determinism, and parity vs previous serializer for a sample DB.","details":null,"feature_name":"default","tests_required":true,"priority":10,"status":"pending","created_at":"2026-01-26 21:09:38","updated_at":"2026-01-26 21:09:38","started_at":null,"completed_at":null}
{"record_type":"task","name":"snapshot-jsonl-sql-design","description":"Draft SQL that emits deterministic JSONL lines (meta + feature + task + dependency) using JSON1 functions; verify key order, sort order, and boolean normalization.","details":null,"feature_name":"default","tests_required":true,"priority":10,"status":"completed","created_at":"2026-01-26 21:09:32","updated_at":"2026-01-26 21:16:32","started_at":"2026-01-26 21:11:22","completed_at":"2026-01-26 21:16:32"}
{"record_type":"task","name":"split-tests-modules","description":"Split remaining tests into focused modules to keep task size manageable.","details":"Group tests by domain or feature; move into separate modules while keeping fixtures consistent.","feature_name":"tests","tests_required":true,"priority":4,"status":"completed","created_at":"2026-01-26 10:52:11","updated_at":"2026-01-26 12:49:19","started_at":"2026-01-26 12:46:10","completed_at":"2026-01-26 12:49:19"}
{"record_type":"task","name":"update-docs-and-types","description":"Update type hints, docstrings, and any public docs to reflect model returns","details":null,"feature_name":"mcp-typed-returns","tests_required":true,"priority":5,"status":"completed","created_at":"2026-01-26 07:44:47","updated_at":"2026-01-26 10:07:13","started_at":"2026-01-26 09:14:44","completed_at":"2026-01-26 10:07:13"}
{"record_type":"task","name":"update-mcp-tools-to-models","description":"Update FastMCP tool handlers to return typed models and adjust signatures","details":null,"feature_name":"mcp-typed-returns","tests_required":true,"priority":8,"status":"completed","created_at":"2026-01-26 07:44:40","updated_at":"2026-01-26 08:15:16","started_at":"2026-01-26 08:15:15","completed_at":"2026-01-26 08:15:16"}
{"record_type":"task","name":"update-repositories-to-models","description":"Convert repository methods to return typed models instead of Dict[str, Any]","details":null,"feature_name":"mcp-typed-returns","tests_required":true,"priority":8,"status":"completed","created_at":"2026-01-26 07:44:37","updated_at":"2026-01-26 08:15:08","started_at":"2026-01-26 08:07:40","completed_at":"2026-01-26 08:15:08"}
{"record_type":"task","name":"update-tests-for-models","description":"Update tests to assert on Pydantic models and validate serialization where needed","details":null,"feature_name":"mcp-typed-returns","tests_required":true,"priority":7,"status":"completed","created_at":"2026-01-26 07:44:43","updated_at":"2026-01-26 09:12:36","started_at":"2026-01-26 08:56:23","completed_at":"2026-01-26 09:12:36"}
{"record_type":"task","name":"wire-mcp-snapshot-tools","description":"Expose snapshot tools via MCP","details":"Register export_snapshot/import_snapshot in src/tasktree_mcp/tools.py using new snapshot module and snapshot path helper. Validate inputs and return success metadata or summary.","feature_name":"default","tests_required":true,"priority":5,"status":"pending","created_at":"2026-01-26 10:03:28","updated_at":"2026-01-26 10:03:28","started_at":null,"completed_at":null}
{"record_type":"dependency","task_name":"add-snapshot-path-helper","depends_on_task_name":"design-jsonl-snapshot-format"}
{"record_type":"dependency","task_name":"add-snapshot-tests","depends_on_task_name":"add-snapshot-path-helper"}
{"record_type":"dependency","task_name":"add-snapshot-tests","depends_on_task_name":"implement-snapshot-module"}
{"record_type":"dependency","task_name":"add-taskfile-snapshot-commands","depends_on_task_name":"implement-snapshot-module"}
{"record_type":"dependency","task_name":"define-response-models","depends_on_task_name":"inventory-untyped-returns"}
{"record_type":"dependency","task_name":"document-snapshot-workflow","depends_on_task_name":"implement-snapshot-module"}
{"record_type":"dependency","task_name":"expose-tests-required-mcp","depends_on_task_name":"add-tests-required-flag"}
{"record_type":"dependency","task_name":"graph-server-extract-html-template","depends_on_task_name":"graph-server-create-assets-dir"}
{"record_type":"dependency","task_name":"graph-server-extract-js","depends_on_task_name":"graph-server-create-assets-dir"}
{"record_type":"dependency","task_name":"graph-server-serve-static-files","depends_on_task_name":"graph-server-create-assets-dir"}
{"record_type":"dependency","task_name":"graph-server-update-handler","depends_on_task_name":"graph-server-extract-html-template"}
{"record_type":"dependency","task_name":"graph-server-update-handler","depends_on_task_name":"graph-server-extract-js"}
{"record_type":"dependency","task_name":"graph-server-update-handler","depends_on_task_name":"graph-server-serve-static-files"}
{"record_type":"dependency","task_name":"implement-snapshot-module","depends_on_task_name":"design-jsonl-snapshot-format"}
{"record_type":"dependency","task_name":"prune-test-suite-cleanup","depends_on_task_name":"prune-test-suite-review"}
{"record_type":"dependency","task_name":"prune-test-suite-review","depends_on_task_name":"prune-test-suite"}
{"record_type":"dependency","task_name":"snapshot-docs","depends_on_task_name":"snapshot-export-impl"}
{"record_type":"dependency","task_name":"snapshot-export-impl","depends_on_task_name":"snapshot-jsonl-sql-design"}
{"record_type":"dependency","task_name":"snapshot-export-tests","depends_on_task_name":"snapshot-export-impl"}
{"record_type":"dependency","task_name":"split-tests-modules","depends_on_task_name":"prune-test-suite-cleanup"}
{"record_type":"dependency","task_name":"update-docs-and-types","depends_on_task_name":"update-mcp-tools-to-models"}
{"record_type":"dependency","task_name":"update-mcp-tools-to-models","depends_on_task_name":"update-repositories-to-models"}
{"record_type":"dependency","task_name":"update-repositories-to-models","depends_on_task_name":"define-response-models"}
{"record_type":"dependency","task_name":"update-tests-for-models","depends_on_task_name":"update-mcp-tools-to-models"}
{"record_type":"dependency","task_name":"wire-mcp-snapshot-tools","depends_on_task_name":"add-snapshot-path-helper"}
{"record_type":"dependency","task_name":"wire-mcp-snapshot-tools","depends_on_task_name":"implement-snapshot-module"}
